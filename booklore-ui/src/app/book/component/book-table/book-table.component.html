<p-table
  [value]="books"
  [resizableColumns]="true"
  showGridlines
  stripedRows
  [scrollable]="true"
  [scrollHeight]="'calc(100vh - 160px)'"
  [virtualScroll]="true"
  [virtualScrollItemSize]="46"
  [(selection)]="selectedBooks"
  (onHeaderCheckboxToggle)="onHeaderCheckboxToggle($event)"
  (onRowSelect)="onRowSelect($event)"
  (onRowUnselect)="onRowUnselect($event)">
  <ng-template #header>
    <tr>
      <th class="max-w-16">Cover</th>
      <th pResizableColumn>Title</th>
      <th pResizableColumn>Publisher</th>
      <th>Published</th>
      <th>ISBN</th>
      <th>Language</th>
      <th>Rating</th>
      <th>Pages</th>
      <th>Reviews</th>
      <th>
        <p-tableHeaderCheckbox/>
      </th>
    </tr>
  </ng-template>
  <ng-template #body let-book>
    <tr style="height:46px">
      <td (click)="openMetadataCenter(book.id)"><img [src]="getBookCoverUrl(book.id)" alt="Book Cover" class="size-7"/></td>
      <td (click)="openMetadataCenter(book.id)" class="w-1/2 max-w-96 overflow-hidden truncate" [title]="book.metadata?.id">{{ book.metadata?.title }}</td>
      <td class="w-1/6 max-w-40 overflow-hidden truncate">{{ book.metadata?.publisher }}</td>
      <td class="w-1/12 max-w-30 overflow-hidden truncate">{{ book.metadata?.publishedDate }}</td>
      <td class="w-1/12 max-w-32 overflow-hidden truncate">{{ book.metadata?.isbn10 }}</td>
      <td class="w-1/12 max-w-28 overflow-hidden truncate">{{ book.metadata?.language }}</td>
      <td class="w-1/12 max-w-30 overflow-hidden truncate">
        <ng-container *ngIf="book.metadata">
          <p-rating
            [(ngModel)]="book.metadata.rating"
            readonly
            stars="5"
            [style.--p-rating-icon-active-color]="getStarColor(book.metadata.rating)">
          </p-rating>
        </ng-container>
      </td>
      <td class="w-1/12 max-w-32 overflow-hidden truncate">{{ book.metadata?.pageCount }}</td>
      <td class="w-1/12 max-w-32 overflow-hidden truncate">{{ book.metadata?.reviewCount }}</td>
      <td class="max-w-16">
        <p-tableCheckbox [value]="book"></p-tableCheckbox>
      </td>
    </tr>
  </ng-template>
</p-table>
